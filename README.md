# NXP-SmartCar
全国大学生智能汽车竞赛。   
图像采集和处理，赛道电感循迹，恒功率无线充电，速度和转向PID控制。
运行过程全自动，无任何人为干预。
基于恩智浦（飞思卡尔）KL46。编程工具为IAR。使用官方库以及山外第三方库。
摄像头为ov7725。
PCB工程文件以及IAR工程文件见以下链接，该作品仅作展示使用，请勿以任何形式直接套用。
链接：https://pan.baidu.com/s/1lr4kSgERVmvEYN0La1BkqA 
提取码：j9x6 
版本为：R50&R100环（单右环）






以下为注意事项：需要手动设定的参数：（右环）
 
丢线保护是否关闭：pid.c中的宏定义
检测干簧管的时间：STOPTIME
电   压   设   定 值：POWERSET      新的核心板和实际电压几乎一致
不检测圆环的时间： CIRTIME        在pid.c中，很重要！！    可以避免在起跑线误触发！！！
圆环个数 和 方 向： 在pid.c中，Dir_PD圆环检测处

拨码开关：
1111    RUN        速度设定42      （默认模式）                 全1
1110    IMAGE                                                               第1个推上去
1101    ADC				     第2个推上去
0000    速度设定40   对应800PWM                                   0
0001    速度设定41   对应900PWM                                   1
0010    不过圆环    42                                                      2
0011    舵机参数加硬1（默认速度）		      3
1100    舵机参数加硬2（默认速度）
0100    舵机参数减软2 （默认速度）		      4   
0101    舵机参数减软3 （默认速度）
	
1111    舵机参数 31 27  26  25 （默认速度）                     全1

拨码开关方向： 从后往前


单左环程序状态不好，出问题时建议最低速，保底！  大环最低速可以过，小环高速可以过

发车时要将车子尽可能放正放正放正！因为会会涉及采集AD值

发车时一定要关闭保护,一定关图像！

试车时一定要看图像，初始阈值87  0x57
